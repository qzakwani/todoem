<script>
  export let seperator = true;
  import { browser } from "$app/env";
  let theme = browser && (localStorage.getItem("theme") || "light");
  // $: document.documentElement.setAttribute("theme", theme);

  function changeTheme(t) {
    document.documentElement.setAttribute("theme", t);
    localStorage.setItem("theme", t);
  }

  $: browser && changeTheme(theme);
</script>

<div class="container" class:seperator>
  <label class="light-label">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 40 40"
      class:selectedsun={theme == "light"}
      ><path
        d="M20 25.417Q22.25 25.417 23.833 23.833Q25.417 22.25 25.417 20Q25.417 17.75 23.833 16.167Q22.25 14.583 20 14.583Q17.75 14.583 16.167 16.167Q14.583 17.75 14.583 20Q14.583 22.25 16.167 23.833Q17.75 25.417 20 25.417ZM20 27.5Q16.875 27.5 14.688 25.312Q12.5 23.125 12.5 20Q12.5 16.875 14.688 14.688Q16.875 12.5 20 12.5Q23.125 12.5 25.312 14.688Q27.5 16.875 27.5 20Q27.5 23.125 25.312 25.312Q23.125 27.5 20 27.5ZM3.125 21.042Q2.667 21.042 2.375 20.75Q2.083 20.458 2.083 20Q2.083 19.542 2.375 19.25Q2.667 18.958 3.125 18.958H7.292Q7.75 18.958 8.042 19.25Q8.333 19.542 8.333 20Q8.333 20.458 8.042 20.75Q7.75 21.042 7.292 21.042ZM32.708 21.042Q32.25 21.042 31.958 20.75Q31.667 20.458 31.667 20Q31.667 19.542 31.958 19.25Q32.25 18.958 32.708 18.958H36.875Q37.333 18.958 37.625 19.25Q37.917 19.542 37.917 20Q37.917 20.458 37.625 20.75Q37.333 21.042 36.875 21.042ZM20 8.333Q19.542 8.333 19.25 8.042Q18.958 7.75 18.958 7.292V3.125Q18.958 2.667 19.25 2.375Q19.542 2.083 20 2.083Q20.458 2.083 20.75 2.375Q21.042 2.667 21.042 3.125V7.292Q21.042 7.75 20.75 8.042Q20.458 8.333 20 8.333ZM20 37.917Q19.542 37.917 19.25 37.625Q18.958 37.333 18.958 36.875V32.708Q18.958 32.25 19.25 31.958Q19.542 31.667 20 31.667Q20.458 31.667 20.75 31.958Q21.042 32.25 21.042 32.708V36.875Q21.042 37.333 20.75 37.625Q20.458 37.917 20 37.917ZM10.292 11.75 7.917 9.417Q7.583 9.125 7.604 8.688Q7.625 8.25 7.917 7.917Q8.25 7.583 8.667 7.583Q9.083 7.583 9.417 7.917L11.75 10.292Q12.042 10.583 12.042 11Q12.042 11.417 11.75 11.75Q11.458 12.042 11.042 12.042Q10.625 12.042 10.292 11.75ZM30.583 32.083 28.25 29.708Q27.958 29.417 27.958 28.979Q27.958 28.542 28.25 28.25Q28.542 27.917 28.958 27.938Q29.375 27.958 29.708 28.25L32.083 30.583Q32.417 30.875 32.396 31.312Q32.375 31.75 32.083 32.083Q31.75 32.417 31.333 32.417Q30.917 32.417 30.583 32.083ZM28.25 11.75Q27.917 11.458 27.938 11.042Q27.958 10.625 28.25 10.292L30.583 7.917Q30.875 7.583 31.312 7.604Q31.75 7.625 32.083 7.917Q32.417 8.25 32.417 8.667Q32.417 9.083 32.083 9.417L29.708 11.75Q29.417 12.042 29 12.042Q28.583 12.042 28.25 11.75ZM7.917 32.083Q7.583 31.75 7.583 31.333Q7.583 30.917 7.917 30.583L10.292 28.25Q10.583 27.917 11 27.917Q11.417 27.917 11.75 28.25Q12.042 28.542 12.042 28.958Q12.042 29.375 11.75 29.708L9.417 32.083Q9.083 32.417 8.667 32.396Q8.25 32.375 7.917 32.083ZM20 20Q20 20 20 20Q20 20 20 20Q20 20 20 20Q20 20 20 20Q20 20 20 20Q20 20 20 20Q20 20 20 20Q20 20 20 20Z"
      /></svg
    >

    <input type="radio" name="theme" hidden bind:group={theme} value="light" />
  </label>

  <label class="dark-label">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 40 40"
      class:selectedmoon={theme == "dark"}
      ><path
        d="M20.042 34.167Q14.125 34.167 10 30.042Q5.875 25.917 5.875 20Q5.875 14.333 9.708 10.292Q13.542 6.25 19.125 5.917Q19.333 5.917 19.604 5.938Q19.875 5.958 20.208 5.958Q19.042 7.208 18.375 8.917Q17.708 10.625 17.708 12.5Q17.708 16.583 20.583 19.458Q23.458 22.333 27.542 22.333Q29.417 22.333 31.125 21.708Q32.833 21.083 34.042 19.958Q34.083 20.25 34.104 20.479Q34.125 20.708 34.125 20.917Q33.792 26.5 29.75 30.333Q25.708 34.167 20.042 34.167ZM20.042 32.083Q24.125 32.083 27.271 29.667Q30.417 27.25 31.5 23.75Q30.583 24.083 29.562 24.25Q28.542 24.417 27.542 24.417Q22.583 24.417 19.104 20.938Q15.625 17.458 15.625 12.5Q15.625 11.583 15.792 10.604Q15.958 9.625 16.333 8.458Q12.667 9.708 10.312 12.875Q7.958 16.042 7.958 20Q7.958 25.042 11.5 28.562Q15.042 32.083 20.042 32.083ZM19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Q19.75 20.292 19.75 20.292Z"
      /></svg
    >

    <input type="radio" name="theme" hidden bind:group={theme} value="dark" />
  </label>
</div>

<style>
  .container {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-around;
    padding: var(--menu-tab-padding);
  }

  .seperator {
    border-bottom: var(--menu-tab-border);
  }

  label {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border-radius: 100%;
    background-color: white;

    cursor: pointer;
  }

  svg {
    fill: var(--mode-off, gray);
    transition: all 100ms linear;
  }

  .light-label:hover > svg,
  .selectedsun {
    fill: var(--light-mode-on, yellow);
  }

  .dark-label:hover > svg,
  .selectedmoon {
    fill: var(--dark-mode-on, darkblue);
  }
</style>
